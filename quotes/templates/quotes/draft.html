{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Draft Quotations | QMS</title>

  <!-- Remix Icons -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet" />

  <style>
    /* =========================
       GLOBAL THEME (Sales Manager)
       ========================= */
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: radial-gradient(circle at 30% 50%, #1f1c2c, #928dab);
      color: #ffffff;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    /* =========================
       TOP NAVBAR
       ========================= */
    .navbar {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      padding: 16px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    .navbar .title {
      font-size: 22px;
      font-weight: 600;
      color: #ffd700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .navbar .nav-link {
      font-weight: 500;
      color: #ffd700;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* =========================
       MAIN CONTAINER (Glass Card)
       ========================= */
    .main-box {
      width: 92%;
      max-width: 1300px;
      margin: 40px auto;
      background: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(18px);
      padding: 30px;
      border-radius: 18px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
    }

    /* =========================
       PAGE TITLE
       ========================= */
    .page-title {
      font-size: 22px;
      font-weight: 600;
      color: #ffd700;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* =========================
       TABLE (Sales Manager Style)
       ========================= */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      overflow: hidden;
      border-radius: 14px;
    }

    .data-table thead {
      background: rgba(255, 255, 255, 0.18);
    }

    .data-table th {
      padding: 16px;
      text-align: left;
      font-size: 14px;
      font-weight: 600;
      color: #ffd700;
      border-bottom: 1px solid rgba(255, 255, 255, 0.25);
    }

    .data-table td {
      padding: 15px;
      font-size: 14px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.05);
    }

    .data-table tr:hover td {
      background: rgba(255, 255, 255, 0.08);
    }

    .muted-text {
      color: #cfcfcf;
      font-style: italic;
    }

    /* =========================
       ACTION BUTTONS
       ========================= */
    .action-cell {
      display: flex;
      gap: 10px;
    }

    .btn {
      padding: 8px 16px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.25s ease;
    }

    .btn-primary {
      background: #0ea5e9;
      color: #ffffff;
    }

    .btn-primary:hover {
      background: #0284c7;
      transform: translateY(-2px);
    }

    .btn-danger {
      background: #ef4444;
      color: #ffffff;
    }

    .btn-danger:hover {
      background: #dc2626;
      transform: translateY(-2px);
    }

    /* Disabled Resume */
    .btn-disabled {
      background: #6b7280;
      color: #ffffff;
      opacity: 0.6;
      cursor: not-allowed;
      pointer-events: none;
    }

    /* =========================
       FOOTER BUTTON
       ========================= */
    .back-btn {
      margin-top: 25px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.15);
      color: #ffd700;
      font-weight: 500;
      transition: all 0.25s ease;
    }

    .back-btn:hover {
      background: rgba(255, 255, 255, 0.25);
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <div class="navbar">
    <div class="title">
      <i class="ri-draft-line"></i> Draft Quotations
    </div>

    <a href="{% url 'salesperson_dashboard' %}" class="nav-link">
      <i class="ri-home-4-line"></i> Dashboard
    </a>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main-box">

    <div class="page-title">
      <i class="ri-file-list-line"></i> Saved Draft Quotations
    </div>

    <table class="data-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Client</th>
          <th>Products</th>
          <th>Total Amount</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        {% for draft in drafts %}
        <tr>
          <td>{{ draft.id }}</td>

          <td>
            {% if draft.client %}
              {{ draft.client.company_name }}
            {% else %}
              <span class="muted-text">Unknown Client</span>
            {% endif %}
          </td>
           

          <td>{{ draft.total_amount }}</td>
          <td>{{ draft.date_created|date:"d M Y" }}</td>

          <td class="action-cell">
            <!-- Resume disabled --

            <!-- Delete -->
            <a href="{% url 'draft_delete' draft.id %}"
               class="btn btn-danger"
               onclick="return confirm('Are you sure you want to delete this draft?');">
              <i class="ri-delete-bin-line"></i> Delete
            </a>
          </td>
        </tr>

        {% empty %}
        <tr>
          <td colspan="6" style="text-align:center; padding:20px;">
            No draft quotations found.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <a href="{% url 'salesperson_dashboard' %}" class="back-btn">
      <i class="ri-arrow-left-line"></i> Back to Dashboard
    </a>

  </div>

</body>
</html>
